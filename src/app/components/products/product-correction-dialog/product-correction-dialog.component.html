<div class="screenheader">
    <div>Stock Adjustments</div>
    <div>
        <img
            class="cursor"
            src="/assets/images/svg/close.svg"
            (click)="close()"
            width="20px"
            height="20px"
        />
    </div>
</div>

<div class="content">
    <div style="padding: 0 0 1rem 0">
        <div style="font-size: 13px; color: grey">Product Code</div>
        <div style="font-size: 16px">
            {{ this.data.product_code }}
        </div>
        <div style="font-size: 13px; color: grey">Item Description</div>
        <div style="font-size: 16px">
            {{ this.data.product_description }}
        </div>
    </div>
    <div>
        <div>Stock / MRP Info</div>
        <div class="listHeader">
            <div class="txt-right-align">MRP</div>
            <div class="txt-right-align">In Stock</div>
            <div class="txt-left-align" style="padding-left: 16px">Status</div>
            <div>&nbsp;</div>
            <div>&nbsp;</div>
        </div>
        <div *ngFor="let item of stock_list_array" class="listItem">
            <div style="text-align: right">{{ item.mrp }}</div>
            <div style="text-align: right">{{ item.available_stock }}</div>
            <div style="text-align: left; padding-left: 16px">
                {{ item.is_active === "A" ? "Active" : "In Active" }}
            </div>

            <!-- <div *ngIf="this.stock_list_array?.length === 1">&nbsp;</div> -->
            <div
                *ngIf="item.is_active === 'A'"
                (click)="correct(item)"
                style="color: blue; cursor: pointer; text-align: left"
            >
                Adjust Stock
            </div>
            <div
                *ngIf="item.is_active === 'N'"
                style="
                    color: rgb(183, 183, 183);

                    text-align: left;
                "
            >
                Adjustment (disabled)
            </div>

            <div
                *ngIf="item.is_active === 'A'"
                style="color: red; cursor: pointer; text-align: right"
                (click)="deactivate(item)"
            >
                {{ "Deactivate" }}
            </div>

            <div
                *ngIf="item.is_active === 'N'"
                style="color: red; cursor: pointer; text-align: right"
                (click)="activate(item)"
            >
                {{ "Activate" }}
            </div>
        </div>
    </div>
    <br />
    <div>
        <div
            style="
                font-size: 16px;
                font-style: italic;
                color: orangered;
                padding: 1rem 0rem 0.5rem 0;
            "
            *ngIf="selected_item"
        >
            Correct Stock if required
        </div>

        <div class="listHeader1" *ngIf="selected_item">
            <div class="txt-right-align">MRP</div>
            <div style="text-align: right">In Stock</div>
            <div
                class="text-align: right"
                style="text-align: right; width: 90px"
            >
                New Qty
            </div>
            <div>&nbsp;</div>
        </div>
        <div *ngIf="selected_item">
            <form #loginForm="ngForm">
                <div class="listItem1">
                    <div style="text-align: right">
                        {{ selected_item?.mrp }}
                    </div>
                    <div style="text-align: right">
                        {{ selected_item?.available_stock }}
                    </div>
                    <div style="text-align: right">
                        <mat-form-field style="width: 60px; text-align: right">
                            <input
                                type="number"
                                matInput
                                value="0"
                                name="qty"
                                #qty="ngModel"
                                [(ngModel)]="val.qty"
                            />
                        </mat-form-field>
                    </div>
                    <div style="text-align: center">
                        <mat-form-field style="width: 150px">
                            <mat-select
                                [(value)]="selected"
                                placeholder="Select Reason"
                                required
                                (selectionChange)="handleChange($event)"
                            >
                                <mat-option value="Missing"
                                    >Missing Item</mat-option
                                >
                                <mat-option value="Waste">Waste</mat-option>
                                <mat-option value="Breakage"
                                    >Breakage</mat-option
                                >
                                <mat-option value="Shrinkage"
                                    >Shrinkage</mat-option
                                >
                                <mat-option value="Write-offs"
                                    >Write-offs</mat-option
                                >
                                <mat-option value="Internal"
                                    >Internal</mat-option
                                >
                                <mat-option value="Other">Other</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>

                <div
                    style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        justify-items: center;
                    "
                >
                    <div
                        (click)="clear()"
                        style="
                            color: rgb(109, 109, 109);
                            cursor: pointer;
                            border-radius: 20px;
                            border-color: blue;
                            border: 1px solid;
                            width: 120px;
                            text-align: center;
                            padding: 4px;
                            font-size: 14px;
                        "
                    >
                        CANCEL
                    </div>

                    <div (click)="update(loginForm)" class="update">UPDATE</div>
                </div>
            </form>
        </div>
    </div>
</div>
