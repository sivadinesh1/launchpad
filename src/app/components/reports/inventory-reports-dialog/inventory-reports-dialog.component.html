<ion-content>
    <div class="ir-screen-header">
        <div style="font-size: 16px; font-weight: 600; letter-spacing: 1px">
            TRANSACTION DETAILS
        </div>

        <div style="align-items: center">
            <img
                class="cursor"
                src="/assets/images/svg/close.svg"
                (click)="close()"
                width="16px"
                height="16px"
            />
        </div>
    </div>

    <div class="ir-header-sec">
        <div>
            <div style="padding: 1rem 0px 0px 0px">
                <span style="font-size: 16px; font-weight: 600; color: black"
                    >Product Code:&nbsp;</span
                >
                <span>{{ this.product_code }}</span>
            </div>
            <div style="padding: 0.3rem 0px 0.5rem 0px">
                <span style="font-size: 16px; font-weight: 600; color: black"
                    >Product Description:&nbsp;</span
                >
                <span> {{ this.resultList[0]?.product_description }}</span>
            </div>
        </div>
        <div>
            <div style="padding: 1rem 0px 0px 0px">
                <span style="font-size: 16px; font-weight: 600; color: black"
                    >Brand:&nbsp;</span
                >
                <span>
                    {{ this.resultList[0]?.brand_name }}
                </span>
            </div>
            <div style="padding: 0.3rem 0px 0.5rem 0px">
                <span style="font-size: 16px; font-weight: 600; color: black"
                    >Latest MRP:&nbsp;</span
                >
                <span>{{ this.resultList[0]?.mrp }}</span>
            </div>
        </div>
    </div>
    <div>
        <table>
            <thead>
                <tr class="ir-header">
                    <th style="text-align: left">Ref #</th>
                    <th style="text-align: left">Txn Date</th>
                    <!-- <th style="text-align: left">Ref Date</th> -->
                    <th style="text-align: left">Customer/Vendor</th>

                    <th style="text-align: left">Txn Type</th>
                    <th style="text-align: right">Txn Qty</th>

                    <th style="text-align: right">In Stock</th>
                </tr>
            </thead>
            <tbody>
                <tr
                    *ngFor="let item of resultList; let idx = index"
                    class="ir-list-item plain-row-color-nohover"
                >
                    <!-- cell 1 [[REF #]]-->
                    <td
                        *ngIf="item.module === 'Sale'"
                        style="text-align: left; color: blue; cursor: pointer"
                    >
                        <!-- <span
                            (click)="
                                openDialog(
                                    item.module,
                                    item.invoice_no,
                                    item.sale_id,
                                    item.purchase_id,
                                    item.customer_id,
                                    item.vendor_id
                                )
                            "
                        > -->
                        {{ item?.invoice_no }}
                        <!-- </span> -->
                    </td>
                    <td
                        *ngIf="item.module.startsWith('Purchase')"
                        style="text-align: left; color: blue; cursor: pointer"
                    >
                        <!-- <span
                            (click)="
                                openDialog(
                                    item.module,
                                    item.invoice_no,
                                    item.sale_id,
                                    item.purchase_id,
                                    item.customer_id,
                                    item.vendor_id
                                )
                            "
                        > -->
                        {{ item?.pur_inv_no }}
                        <!-- </span> -->
                    </td>
                    <td
                        *ngIf="item.module === 'Product'"
                        style="text-align: left; color: blue; cursor: pointer"
                    >
                        <span>
                            {{ "-" }}
                        </span>
                    </td>
                    <td
                        *ngIf="item.module === 'SaleReturn'"
                        style="text-align: left; color: blue; cursor: pointer"
                    >
                        <!-- <span
                            (click)="
                                openDialog(
                                    item.module,
                                    item.invoice_no,
                                    item.sale_id,
                                    item.purchase_id,
                                    item.customer_id,
                                    item.vendor_id
                                )
                            "
                        > -->
                        {{ item?.credit_note_no }}
                        <!-- </span> -->
                    </td>

                    <!-- cell 3.1 [[TXN DATE]] -->
                    <td style="text-align: left">
                        {{ item?.txn_date | date: "d-M-yyyy" }}
                    </td>

                    <!-- cell 2 [[REF DATE]]-->
                    <!-- <td
                        *ngIf="item.module.startsWith('Purchase')"
                        style="text-align: left"
                    >
                        {{ item?.pur_invoice_date | date: "dd/MMM/yyyy" }}
                    </td>
                    <td *ngIf="item.module === 'Sale'" style="text-align: left">
                        {{ item?.sale_invoice_date | date: "dd/MMM/yyyy" }}
                    </td>
                    <td
                        *ngIf="item.module === 'SaleReturn'"
                        style="text-align: left"
                    >
                        {{ item?.sale_return_date | date: "dd/MMM/yyyy" }}
                    </td> -->
                    <td
                        *ngIf="item.module === 'Product'"
                        style="text-align: left"
                    >
                        {{ "-" }}
                    </td>

                    <!-- cell 3 [[CUSTOMER/VENDOR]] -->
                    <td
                        *ngIf="item.module.startsWith('Purchase')"
                        style="text-align: left"
                    >
                        {{ item.vendor_name }}
                        <span
                            *ngIf="item?.action_type.startsWith('New Product')"
                            >({{ item?.action_type }})</span
                        >
                    </td>

                    <td *ngIf="item.module === 'Sale'" style="text-align: left">
                        {{ item.customer_name }}
                    </td>

                    <td
                        *ngIf="item.module === 'SaleReturn'"
                        style="text-align: left"
                    >
                        {{ item.sale_return_customer_name }}
                    </td>

                    <td
                        *ngIf="item.module === 'Product'"
                        style="text-align: left"
                    >
                        {{ "MRP edit / Product" }}
                    </td>

                    <!-- cell 4 [[TXN TYPE]] -->
                    <td
                        *ngIf="item.module.startsWith('Purchase')"
                        style="text-align: left"
                    >
                        {{ item?.module }}
                        <span *ngIf="item?.action_type.startsWith('Edited')"
                            >({{ item?.action_type }})</span
                        >

                        <span
                            *ngIf="
                                item?.action_type.startsWith('Deleted MRP -')
                            "
                        >
                            - ({{ item?.action_type }})</span
                        >
                    </td>
                    <td *ngIf="item.module === 'Sale'" style="text-align: left">
                        Sale
                        <span
                            *ngIf="
                                item?.action_type.startsWith('Deleted MRP -')
                            "
                        >
                            - ({{ item?.action_type }})</span
                        >
                        <span *ngIf="item?.action_type.startsWith('Edited')">
                            - ({{ item?.action_type }})</span
                        >
                    </td>
                    <td
                        *ngIf="item.module === 'SaleReturn'"
                        style="text-align: left"
                    >
                        Sale Return
                    </td>

                    <!-- cell 5 [[TXN  QTY]] -->
                    <td
                        *ngIf="item.module.startsWith('Purchase')"
                        style="text-align: right"
                    >
                        <span>
                            {{ item?.txn_qty }}
                        </span>
                    </td>

                    <td
                        *ngIf="item?.module === 'Sale'"
                        style="text-align: right"
                    >
                        <span>
                            {{ item?.txn_qty }}
                        </span>
                    </td>

                    <td
                        *ngIf="
                            item?.module === 'Product' &&
                            !item?.action_type.startsWith('Stock Correction')
                        "
                        style="text-align: left; grid-column: 4/-1"
                    >
                        <span>
                            <span>({{ item?.action_type }})</span>
                        </span>
                    </td>

                    <td
                        *ngIf="
                            item?.module === 'Product' &&
                            item?.action_type.startsWith('Stock Correction')
                        "
                        style="text-align: left; grid-column: 4/6"
                    >
                        <span>
                            <span>({{ item?.action_type }})</span>
                        </span>
                    </td>

                    <td
                        *ngIf="item?.module === 'SaleReturn'"
                        style="text-align: right"
                    >
                        <span>
                            {{ item?.txn_qty }}
                        </span>
                    </td>

                    <td
                        *ngIf="item?.module !== 'Product'"
                        style="text-align: right"
                    >
                        {{ item?.stock_level }}
                    </td>
                    <td
                        *ngIf="
                            item?.module === 'Product' &&
                            item?.action_type.startsWith('Stock Correction')
                        "
                        style="text-align: right"
                    >
                        {{ item?.stock_level }}
                    </td>
                </tr>

                <tr *ngIf="resultList?.length === 0">
                    <span style="color: blue">No Records</span>
                </tr>
            </tbody>
        </table>
    </div>
</ion-content>
